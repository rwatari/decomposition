{"version":3,"sources":["webpack:///webpack/bootstrap 4816c2dbc53745637b1c","webpack:///./lib/decomposition.js","webpack:///./lib/simulation.js","webpack:///./lib/webgl_util.js","webpack:///./lib/view.js"],"names":["render","image","canvas","document","getElementById","width","height","gl","getContext","alert","simulation","view","start","addEventListener","Image","crossOrigin","src","onload","Simulation","GAMMA","DIFFUSE","setup","viewport","clearColor","clear","COLOR_BUFFER_BIT","vShaderSource","text","fShaderSourceGray","fShaderSourceShow","fShaderSourceStep","vShader","VERTEX_SHADER","fShaderGray","FRAGMENT_SHADER","fShaderShow","fShaderStep","programGray","programShow","programStep","positionAttribLoc","getAttribLocation","texCoordAttribLoc","texSizeUniformLoc","getUniformLocation","deltaTUniformLoc","texture0","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","TEXTURE_2D","RGBA","UNSIGNED_BYTE","texture1","fbo0","fbo1","positions","texCoords","useProgram","bindTexture","bindFramebuffer","FRAMEBUFFER","drawArrays","TRIANGLE_STRIP","it","delta","uniform2f","uniform1f","createShader","type","source","shader","shaderSource","compileShader","success","getShaderParameter","COMPILE_STATUS","console","log","getShaderInfoLog","deleteShader","createProgram","vertexShader","fragmentShader","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","createTexture","texture","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","createFramebuffer","fbo","framebufferTexture2D","COLOR_ATTACHMENT0","bindVertexAttrib","data","attributeLocation","size","FLOAT","normalize","stride","offset","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","resize","displayWidth","clientWidth","displayHeight","clientHeight","View","lastTime","requestAnimationFrame","simulate","bind","time","draw"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4816c2dbc53745637b1c","import Simulation from './simulation';\nimport View from './view';\n\nimport {resize} from './webgl_util';\n\nconst render = (image) => {\n  const canvas = document.getElementById(\"canvas\");\n  canvas.width = image.width;\n  canvas.height = image.height;\n  const gl = canvas.getContext(\"webgl\");\n  if (!gl) {\n    alert(\"You don't have WebGl enabled!\");\n    return;\n  }\n  // resize(canvas);\n  const simulation = new Simulation(gl, image);\n  const view = new View(simulation);\n  view.start();\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const image = new Image();\n  image.crossOrigin = 'anonymous';\n  image.src = \"https://res.cloudinary.com/dpgudhebt/image/upload/c_crop,h_1080,w_1920/v1484899897/magic-cube-cube-puzzle-play-54101_kaeq1l.jpg\";\n  image.onload = () => render(image);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/decomposition.js","import {\n  createShader,\n  createProgram,\n  createTexture,\n  createFramebuffer,\n  bindVertexAttrib\n} from './webgl_util';\n\nclass Simulation {\n  constructor(gl, image) {\n    this.gl = gl;\n    this.width = image.width;\n    this.height = image.height;\n    this.GAMMA = 0.5;\n    this.DIFFUSE = 2;\n    this.setup(image);\n  }\n\n  setup(image) {\n    const { gl, width, height } = this;\n    gl.viewport(0, 0, width, height); //set clip space\n    gl.clearColor(0, 0, 0, 0); // clear canvas\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // grabbing shader source and attaching them to make program\n    const vShaderSource = document.getElementById(\"v-shader\").text;\n    const fShaderSourceGray = document.getElementById(\"f-shader-gray\").text;\n    const fShaderSourceShow = document.getElementById(\"f-shader-show\").text;\n    const fShaderSourceStep = document.getElementById(\"f-shader-step\").text;\n\n    const vShader = createShader(gl, gl.VERTEX_SHADER, vShaderSource);\n    const fShaderGray = createShader(gl, gl.FRAGMENT_SHADER, fShaderSourceGray);\n    const fShaderShow = createShader(gl, gl.FRAGMENT_SHADER, fShaderSourceShow);\n    const fShaderStep = createShader(gl, gl.FRAGMENT_SHADER, fShaderSourceStep);\n\n    const programGray = createProgram(gl, vShader, fShaderGray);\n    const programShow = createProgram(gl, vShader, fShaderShow);\n    const programStep = createProgram(gl, vShader, fShaderStep);\n\n    // allow shaders to access variables\n    const positionAttribLoc = gl.getAttribLocation(programGray, \"a_position\");\n    const texCoordAttribLoc = gl.getAttribLocation(programGray, \"a_texCoord\");\n    const texSizeUniformLoc = gl.getUniformLocation(programStep, \"u_textureSize\");\n    const deltaTUniformLoc = gl.getUniformLocation(programStep, \"u_deltaT\");\n\n    // original image loaded into this texture\n    const texture0 = createTexture(gl);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true); // load image without flipping upside down\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\n    const texture1 = createTexture(gl);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n    // create framebuffer to attach texture\n    const fbo0 = createFramebuffer(gl, texture0);\n    const fbo1 = createFramebuffer(gl, texture1);\n\n    // bind vertex attributes to position and texture coordinate bounds\n    const positions = [\n      -1., -1.,\n       1., -1.,\n      -1.,  1.,\n       1.,  1.\n    ];\n    bindVertexAttrib(gl, positions, positionAttribLoc);\n\n    const texCoords = [\n      0., 0.,\n      1., 0.,\n      0., 1.,\n      1., 1.\n    ];\n    bindVertexAttrib(gl, texCoords, texCoordAttribLoc);\n\n    // uniform2f needs to come after program declaration\n    // location needs to be attached to program\n    // bind texture to read from\n    // bind framebuffer to render to\n    gl.useProgram(programGray);\n    gl.bindTexture(gl.TEXTURE_2D, texture0);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo1);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    gl.useProgram(programShow);\n    gl.bindTexture(gl.TEXTURE_2D, texture1);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    this.programShow = programShow;\n    this.programStep = programStep;\n    this.texture0 = texture0;\n    this.texture1 = texture1;\n    this.fbo0 = fbo0;\n    this.fbo1 = fbo1;\n    this.texSizeUniformLoc = texSizeUniformLoc;\n    this.deltaTUniformLoc = deltaTUniformLoc;\n    this.it = -1;\n  }\n\n  draw(delta) {\n    const {\n      gl,\n      width, height,\n      programStep, programShow,\n      texture0, texture1,\n      fbo0, fbo1,\n      texSizeUniformLoc, deltaTUniformLoc,\n      it\n    } = this;\n\n    gl.useProgram(programStep);\n    gl.uniform2f(texSizeUniformLoc, width, height);\n    gl.uniform1f(deltaTUniformLoc, delta);\n    if (it > 0) {\n      gl.bindTexture(gl.TEXTURE_2D, texture0);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fbo1);\n    } else {\n      gl.bindTexture(gl.TEXTURE_2D, texture1);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fbo0);\n    }\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    gl.useProgram(programShow);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    this.it = -it;\n  }\n}\n\nexport default Simulation;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/simulation.js","/*\nThese utility functions are based on the content from\nhttps://webglfundamentals.org\n*/\n\nexport const createShader = (gl, type, source) => {\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n  if (success) return shader;\n\n  console.log(gl.getShaderInfoLog(shader));\n  gl.deleteShader(shader);\n};\n\nexport const createProgram = (gl, vertexShader, fragmentShader) => {\n  const program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n  if (success) return program;\n\n  console.log(gl.getProgramInfoLog(program));\n  gl.deleteProgram(program);\n};\n\nexport const createTexture = gl => {\n  const texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n  return texture;\n};\n\nexport const createFramebuffer = (gl, texture) => {\n  const fbo = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n  gl.framebufferTexture2D(\n    gl.FRAMEBUFFER,\n    gl.COLOR_ATTACHMENT0,\n    gl.TEXTURE_2D,\n    texture,\n    0\n  );\n  return fbo;\n}\n\nexport const bindVertexAttrib = (\n  gl,\n  data,\n  attributeLocation,\n  size = 2,           // read two data points at a time\n  type = gl.FLOAT,    // read data as floats\n  normalize = false,\n  stride = 0,\n  offset = 0\n) => {\n  const buffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n\n  gl.enableVertexAttribArray(attributeLocation);\n  gl.vertexAttribPointer(attributeLocation, size, type, normalize, stride, offset);\n}\n\nexport const resize = (canvas) => {\n  // Lookup the size the browser is displaying the canvas.\n  var displayWidth  = canvas.clientWidth;\n  var displayHeight = canvas.clientHeight;\n\n  // Check if the canvas is not the same size.\n  if (canvas.width  != displayWidth ||\n      canvas.height != displayHeight) {\n\n    // Make the canvas the same size\n    canvas.width  = displayWidth;\n    canvas.height = displayHeight;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webgl_util.js","class View {\n  constructor(simulation) {\n    this.simulation = simulation;\n  }\n\n  start() {\n    this.lastTime = 0;\n    requestAnimationFrame(this.simulate.bind(this));\n  }\n\n  simulate(time) {\n    const delta = time - this.lastTime;\n    this.simulation.draw(delta);\n    this.lastTime = time;\n    console.log(delta);\n    requestAnimationFrame(this.simulate.bind(this));\n  }\n}\n\nexport default View;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/view.js"],"sourceRoot":""}