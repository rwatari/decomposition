{"version":3,"sources":["webpack:///webpack/bootstrap 48e4f92a1cab7a0b8812","webpack:///./lib/decomposition.js","webpack:///./lib/simulation.js","webpack:///./lib/webgl_util.js","webpack:///./lib/view.js"],"names":["render","image","canvas","document","getElementById","width","height","gl","getContext","alert","simulation","view","startButton","addEventListener","toggle","Image","crossOrigin","src","onload","modalVisible","modal","window","event","target","style","display","Simulation","GAMMA","DIFFUSE","setup","viewport","clearColor","clear","COLOR_BUFFER_BIT","vShaderSource","text","fShaderSourceGray","fShaderSourceShow","fShaderSourceStep","vShader","VERTEX_SHADER","fShaderGray","FRAGMENT_SHADER","fShaderShow","fShaderStep","programGray","programShow","programStep","positionAttribLoc","getAttribLocation","texCoordAttribLoc","texSizeUniformLoc","getUniformLocation","deltaTUniformLoc","texture0","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","TEXTURE_2D","RGBA","UNSIGNED_BYTE","texture1","fbo0","fbo1","positions","texCoords","useProgram","bindTexture","bindFramebuffer","FRAMEBUFFER","drawArrays","TRIANGLE_STRIP","it","delta","uniform2f","uniform1f","flush","createShader","type","source","shader","shaderSource","compileShader","success","getShaderParameter","COMPILE_STATUS","console","log","getShaderInfoLog","deleteShader","createProgram","vertexShader","fragmentShader","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","createTexture","texture","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","createFramebuffer","fbo","framebufferTexture2D","COLOR_ATTACHMENT0","bindVertexAttrib","data","attributeLocation","size","FLOAT","normalize","stride","offset","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","resize","displayWidth","clientWidth","displayHeight","clientHeight","View","run","innerHTML","start","lastTime","requestAnimationFrame","simulate","bind","time","draw","updateFPS","Math","round"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 48e4f92a1cab7a0b8812","import Simulation from './simulation';\nimport View from './view';\n\nimport {resize} from './webgl_util';\n\nconst render = (image) => {\n  const canvas = document.getElementById(\"canvas\");\n  canvas.width = image.width;\n  canvas.height = image.height;\n  const gl = canvas.getContext(\"webgl\");\n  if (!gl) {\n    alert(\"You don't have WebGl enabled!\");\n    return;\n  }\n  // resize(canvas);\n  const simulation = new Simulation(gl, image);\n  const view = new View(simulation);\n\n  const startButton = document.getElementById(\"start\");\n  startButton.addEventListener(\"click\", () => {\n    view.toggle(startButton);\n  });\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const image = new Image();\n  image.crossOrigin = 'anonymous';\n  image.src = \"https://res.cloudinary.com/dpgudhebt/image/upload/c_crop,h_1080,w_1920/v1484899897/magic-cube-cube-puzzle-play-54101_kaeq1l.jpg\";\n  image.onload = () => render(image);\n\n  let modalVisible = true;\n  const modal = document.getElementById(\"modal\");\n  window.addEventListener(\"click\", event => {\n    if (modalVisible && event.target === modal) {\n      modal.style.display = \"none\";\n    } else {\n      modal.style.display = \"flex\";\n    }\n    modalVisible = !modalVisible;\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/decomposition.js","import {\n  createShader,\n  createProgram,\n  createTexture,\n  createFramebuffer,\n  bindVertexAttrib\n} from './webgl_util';\n\nclass Simulation {\n  constructor(gl, image) {\n    this.gl = gl;\n    this.width = image.width;\n    this.height = image.height;\n    this.GAMMA = 0.5;\n    this.DIFFUSE = 2;\n    this.setup(image);\n  }\n\n  setup(image) {\n    const { gl, width, height } = this;\n    gl.viewport(0, 0, width, height); //set clip space\n    gl.clearColor(0, 0, 0, 0); // clear canvas\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // grabbing shader source and attaching them to make program\n    const vShaderSource = document.getElementById(\"v-shader\").text;\n    const fShaderSourceGray = document.getElementById(\"f-shader-gray\").text;\n    const fShaderSourceShow = document.getElementById(\"f-shader-show\").text;\n    const fShaderSourceStep = document.getElementById(\"f-shader-step\").text;\n\n    const vShader = createShader(gl, gl.VERTEX_SHADER, vShaderSource);\n    const fShaderGray = createShader(gl, gl.FRAGMENT_SHADER, fShaderSourceGray);\n    const fShaderShow = createShader(gl, gl.FRAGMENT_SHADER, fShaderSourceShow);\n    const fShaderStep = createShader(gl, gl.FRAGMENT_SHADER, fShaderSourceStep);\n\n    const programGray = createProgram(gl, vShader, fShaderGray);\n    const programShow = createProgram(gl, vShader, fShaderShow);\n    const programStep = createProgram(gl, vShader, fShaderStep);\n\n    // allow shaders to access variables\n    const positionAttribLoc = gl.getAttribLocation(programGray, \"a_position\");\n    const texCoordAttribLoc = gl.getAttribLocation(programGray, \"a_texCoord\");\n    const texSizeUniformLoc = gl.getUniformLocation(programStep, \"u_textureSize\");\n    const deltaTUniformLoc = gl.getUniformLocation(programStep, \"u_deltaT\");\n\n    // original image loaded into this texture\n    const texture0 = createTexture(gl);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true); // load image without flipping upside down\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\n    const texture1 = createTexture(gl);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n    // create framebuffer to attach texture\n    const fbo0 = createFramebuffer(gl, texture0);\n    const fbo1 = createFramebuffer(gl, texture1);\n\n    // bind vertex attributes to position and texture coordinate bounds\n    const positions = [\n      -1., -1.,\n       1., -1.,\n      -1.,  1.,\n       1.,  1.\n    ];\n    bindVertexAttrib(gl, positions, positionAttribLoc);\n\n    const texCoords = [\n      0., 0.,\n      1., 0.,\n      0., 1.,\n      1., 1.\n    ];\n    bindVertexAttrib(gl, texCoords, texCoordAttribLoc);\n\n    // uniform2f needs to come after program declaration\n    // location needs to be attached to program\n    // bind texture to read from\n    // bind framebuffer to render to\n    gl.useProgram(programGray);\n    gl.bindTexture(gl.TEXTURE_2D, texture0);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo1);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    gl.useProgram(programShow);\n    gl.bindTexture(gl.TEXTURE_2D, texture1);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    this.programShow = programShow;\n    this.programStep = programStep;\n    this.texture0 = texture0;\n    this.texture1 = texture1;\n    this.fbo0 = fbo0;\n    this.fbo1 = fbo1;\n    this.texSizeUniformLoc = texSizeUniformLoc;\n    this.deltaTUniformLoc = deltaTUniformLoc;\n    this.it = -1;\n  }\n\n  draw(delta) {\n    const {\n      gl, width, height,\n      programStep, programShow,\n      texture0, texture1,\n      fbo0, fbo1,\n      texSizeUniformLoc, deltaTUniformLoc,\n      it\n    } = this;\n\n    gl.useProgram(programStep);\n    gl.uniform2f(texSizeUniformLoc, width, height);\n    gl.uniform1f(deltaTUniformLoc, delta);\n    if (it > 0) {\n      gl.bindTexture(gl.TEXTURE_2D, texture0);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fbo1);\n    } else {\n      gl.bindTexture(gl.TEXTURE_2D, texture1);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fbo0);\n    }\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    gl.useProgram(programShow);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    gl.flush();\n    this.it = -it;\n  }\n}\n\nexport default Simulation;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/simulation.js","/*\nThese utility functions are based on the content from\nhttps://webglfundamentals.org\n*/\n\nexport const createShader = (gl, type, source) => {\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n  if (success) return shader;\n\n  console.log(gl.getShaderInfoLog(shader));\n  gl.deleteShader(shader);\n};\n\nexport const createProgram = (gl, vertexShader, fragmentShader) => {\n  const program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n  if (success) return program;\n\n  console.log(gl.getProgramInfoLog(program));\n  gl.deleteProgram(program);\n};\n\nexport const createTexture = gl => {\n  const texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n  return texture;\n};\n\nexport const createFramebuffer = (gl, texture) => {\n  const fbo = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n  gl.framebufferTexture2D(\n    gl.FRAMEBUFFER,\n    gl.COLOR_ATTACHMENT0,\n    gl.TEXTURE_2D,\n    texture,\n    0\n  );\n  return fbo;\n}\n\nexport const bindVertexAttrib = (\n  gl,\n  data,\n  attributeLocation,\n  size = 2,           // read two data points at a time\n  type = gl.FLOAT,    // read data as floats\n  normalize = false,\n  stride = 0,\n  offset = 0\n) => {\n  const buffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n\n  gl.enableVertexAttribArray(attributeLocation);\n  gl.vertexAttribPointer(attributeLocation, size, type, normalize, stride, offset);\n}\n\nexport const resize = (canvas) => {\n  // Lookup the size the browser is displaying the canvas.\n  var displayWidth  = canvas.clientWidth;\n  var displayHeight = canvas.clientHeight;\n\n  // Check if the canvas is not the same size.\n  if (canvas.width  != displayWidth ||\n      canvas.height != displayHeight) {\n\n    // Make the canvas the same size\n    canvas.width  = displayWidth;\n    canvas.height = displayHeight;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webgl_util.js","class View {\n  constructor(simulation) {\n    this.simulation = simulation;\n    this.run = false;\n  }\n\n  toggle(startButton) {\n    if (this.run) {\n      this.run = false;\n      startButton.innerHTML = \"Start\";\n    } else {\n      this.run = true;\n      startButton.innerHTML = \"Stop\";\n      this.start();\n    }\n  }\n\n  start() {\n    this.lastTime = 0;\n    requestAnimationFrame(this.simulate.bind(this));\n  }\n\n  simulate(time) {\n    if (!this.run) return;\n    const delta = time - this.lastTime;\n    this.simulation.draw(delta);\n    this.lastTime = time;\n    this.updateFPS(delta);\n    requestAnimationFrame(this.simulate.bind(this));\n  }\n\n  updateFPS(delta) {\n    document.getElementById(\"fps\").innerHTML = Math.round(1000/delta);\n  }\n}\n\nexport default View;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/view.js"],"sourceRoot":""}